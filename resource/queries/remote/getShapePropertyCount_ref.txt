SELECT (COUNT(*) as ?count)
FROM <%4$s>
WHERE
{
  {
    SELECT *
    {
      ?subj wdt:P31 <%1$s> .
      ?subj <%2$s> ?target .
      FILTER EXISTS
      {
        ?target wdt:P31 <%3$s> .
      }
    }
    LIMIT 100000
  }
}
